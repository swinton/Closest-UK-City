#!/usr/bin/env python

from distance_on_unit_sphere import distance_on_unit_sphere

CITIES = (
    ("London",51.506321,-0.12714),
    ("Birmingham",52.47863,-1.90845),
    ("Glasgow",55.8578,-4.24251),
    ("Liverpool",53.409771,-2.97848),
    ("Leeds",53.794491,-1.54658),
    ("Sheffield",53.38311,-1.46454),
    ("Edinburgh",55.954151,-3.20277),
    ("Bristol",51.453732,-2.59156),
    ("Manchester",53.479599,-2.24881),
    ("Leicester",52.637981,-1.14043),
    ("Coventry",52.406979,-1.50776),
    ("Kingston upon Hull",53.743198,-0.34585),
    ("Bradford",53.795731,-1.7583),
    ("Cardiff",51.481251,-3.18073),
    ("Belfast",54.595291,-5.93452),
    ("Stoke-on-Trent",53.029701,-2.17507),
    ("Wolverhampton",52.588638,-2.12168),
    ("Nottingham",52.949219,-1.14392),
    ("Plymouth",50.375801,-4.13689),
    ("Southampton",50.909939,-1.40732),
    ("Reading",51.452381,-0.99603),
    ("Derby",52.91412,-1.46997),
    ("Dudley",52.509521,-2.08351),
    ("Newcastle upon Tyne",54.97794,-1.61162),
    ("Northampton",52.239738,-0.88576),
    ("Portsmouth",50.804008,-1.08728),
    ("Luton",51.894932,-0.42809),
    ("Preston",53.774281,-2.7079),
    ("Aberdeen",57.15382,-2.10679),
    ("Milton Keynes",52.005852,-0.72775),
    ("Sunderland",54.90012,-1.40848),
    ("Norwich",52.62249,1.2949),
    ("Walsall",52.585289,-1.9761),
    ("Swansea",51.62315,-3.94093),
    ("Bournemouth",50.720402,-1.88091),
    ("Southend-on-Sea",51.540379,0.70516),
    ("Swindon",51.57196,-1.78644),
    ("Dundee",56.461369,-2.96761),
    ("Huddersfield",53.647461,-1.79723),
    ("Poole",50.714481,-1.98674),
    ("Oxford",51.756199,-1.25949),
    ("Middlesbrough",54.573051,-1.23763),
    ("Blackpool",53.825069,-3.02075),
    ("Bolton",53.585789,-2.43874),
    ("Ipswich",52.05777,1.14378),
    ("Telford",52.678242,-2.47546),
    ("York",53.953331,-1.08342),
    ("West Bromwich",52.51862,-1.99022),
    ("Peterborough",52.57336,-0.24843),
    ("Stockport",53.408409,-2.16151),
    ("Brighton",50.828869,-0.13414),
    ("Slough",51.507999,-0.59634),
    ("Gloucester",51.854191,-2.22682),
    ("Watford",51.652119,-0.39072),
    ("Rotherham",53.426559,-1.36359),
    ("Newport",52.769821,-2.37649),
    ("Cambridge",52.209702,0.11142),
    ("Exeter",50.72076,-3.51534),
    ("Eastbourne",50.782478,0.29073),
    ("Sutton Coldfield",52.556709,-1.80058),
    ("Blackburn",53.748539,-2.48869),
    ("Colchester",51.88966,0.88943),
    ("Oldham",53.540298,-2.11232),
    ("St Helens",53.451679,-2.73886),
    ("Woking",51.314758,-0.56623),
    ("Crawley",51.11655,-0.18703),
    ("Chelmsford",51.735691,0.47791),
    ("Basildon",51.57198,0.46694),
    ("Cheltenham",51.89603,-2.08793),
    ("Gillingham",51.372662,0.57504),
    ("Worthing",50.83033,-0.38639),
    ("Rochdale",53.611038,-2.16696),
    ("Solihull",52.415058,-1.77785),
    ("Worcester",52.191059,-2.22227),
    ("Derry",54.992409,-7.31923),
    ("Southport",53.633282,-3.00365),
    ("Basingstoke",51.261429,-1.09712),
    ("Bath",51.385029,-2.36132),
    ("Maidstone",51.265301,0.51804),
    ("Harlow",51.768589,0.10555),
    ("Grimsby",53.560989,-0.09237),
    ("Darlington",54.53175,-1.55102),
    ("Hartlepool",54.682079,-1.22182),
    ("Lincoln",53.22057,-0.54468),
    ("Hastings",50.87077,0.57405),
    ("Birkenhead",53.386021,-3.07148),
    ("Halifax",53.728851,-1.87821),
    ("Hemel Hempstead",51.749001,-0.47508),
    ("South Shields",54.99646,-1.43052),
    ("Bedford",52.148102,-0.45142),
    ("St Albans",51.753601,-0.3373),
    ("Stevenage",51.903069,-0.19056),
    ("Wigan",53.542221,-2.64556),
    ("Warrington",53.388229,-2.55396),
    ("Chester",53.197289,-2.89373),
    ("Stockton-on-Tees",54.578491,-1.33002),
    ("Gateshead",54.961128,-1.60169),
    ("Weston-super-Mare",51.346191,-2.97718),
    ("High Wycombe",51.629398,-0.74739),
    ("Wakefield",53.677631,-1.50951),
    ("Redditch",52.30727,-1.94126),
    ("Newcastle-under-Lyme",53.008789,-2.2286),
    ("Paisley",55.842911,-4.41984),
    ("East Kilbride",55.767391,-4.18587),
    ("Chatham",51.380711,0.51323),
    ("Burnley",53.794601,-2.24705),
    ("Salford",53.489731,-2.2843),
    ("Scunthorpe",53.583809,-0.64364),
    ("Hove",50.839989,-0.19194),
    ("Carlisle",54.90131,-2.93615),
    ("Tamworth",52.619541,-1.68316),
    ("Barnsley",53.557831,-1.46295),
    ("Harrogate",53.991192,-1.53568),
    ("Lisburn",54.510021,-6.04215),
    ("Bracknell",51.408169,-0.75209),
    ("Nuneaton",52.518608,-1.4833),
    ("Chesterfield",53.24786,-1.43993),
    ("Mansfield",53.146118,-1.18527),
    ("Guildford",51.23708,-0.57051),
    ("Gosport",50.8078,-1.15059),
    ("Aylesbury",51.815231,-0.81307),
    ("Lowestoft",52.472561,1.72548),
    ("Doncaster",53.523491,-1.13172),
    ("Crewe",53.095589,-2.45575),
    ("Shrewsbury",52.714642,-2.76267),
    ("Ellesmere Port",53.28083,-2.89668),
    ("Cannock",52.699791,-2.02315),
    ("Grays",51.47961,0.32697),
    ("Stafford",52.802898,-2.10633),
    ("Waterlooville",50.882931,-1.02863),
    ("Torquay",50.476479,-3.52754),
    ("Kingswood",51.625011,-2.36797),
    ("Bognor Regis",50.782959,-0.67535),
    ("Newtownabbey",54.674221,-5.94228),
    ("Rugby",52.376331,-1.25615),
    ("Royal Leamington Spa",52.289139,-1.53532),
    ("Bury",53.593128,-2.29491),
    ("Royal Tunbridge Wells",51.133369,0.26355),
    ("Runcorn",53.331871,-2.70198),
    ("Rhondda",51.650002,-3.48333),
    ("Bootle",53.454948,-3.00594),
    ("Ashford",51.145229,0.87117),
    ("Maidenhead",51.522369,-0.72725),
    ("Wallasey",53.423771,-3.06523),
    ("Margate",51.380619,1.38269),
    ("Bangor",54.650848,-5.66638),
    ("Taunton",51.01049,-3.1107),
    ("Aldershot",51.253059,-0.75811),
    ("Great Yarmouth",52.612652,1.72408),
    ("Farnborough",51.289829,-0.76724),
    ("Bebington",53.35601,-3.00375),
    ("Dartford",51.446129,0.22581),
    ("Hereford",52.053059,-2.7223),
    ("Fareham",50.852051,-1.18882),
    ("Littlehampton",50.818771,-0.51346),
    ("Widnes",53.37035,-2.74078),
    ("Stourbridge",52.454262,-2.14782),
    ("Kidderminster",52.38208,-2.25192),
    ("Cheshunt",51.70311,-0.04736),
    ("Halesowen",52.450958,-2.05185),
    ("Loughborough",52.767429,-1.22497),
    ("Sale",53.425949,-2.32041),
    ("Dewsbury",53.691601,-1.63111),
    ("Morley",52.964588,-1.41545),
    ("Washington",54.89814,-1.53179),
    ("Gravesend",51.427921,0.36922),
    ("Eastleigh",50.98003,-1.3735),
    ("Crosby",53.487629,-3.02432),
    ("Clacton-on-Sea",51.801899,1.15339),
    ("Kettering",52.396412,-0.72407),
    ("Livingston",52.88356,-1.97406),
    ("Dunstable",51.88662,-0.51601),
    ("Macclesfield",53.26265,-2.13468),
    ("Barry",51.401779,-3.27799),
    ("Staines",51.435162,-0.5066),
)

def closest_city(lat, lng, cities=CITIES):
    """
    Returns city closest to given lat, lng.
    """
    distances = []
    for city, city_lat, city_lng in cities:
        dist = distance_on_unit_sphere(lat, lng, city_lat, city_lng)
        distances.append((city, city_lat, city_lng, dist))
    distances = sorted(distances, reverse=False, key=lambda d: d[3])
    return distances[0]

if __name__ == "__main__":
    print "Closest city to Rustington is", closest_city(50.804131, -0.5122)
